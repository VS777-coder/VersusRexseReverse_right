<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Versus Revise - Absolute Data Checker</title>
    <style>
        html, body { position: fixed; width: 100%; height: 100%; overflow: hidden; overscroll-behavior: none; background: #121212; color: #fff; font-family: sans-serif; margin: 0; padding: 5px; display: flex; flex-direction: column; }
        * { box-sizing: border-box; touch-action: none; -webkit-touch-callout: none; }
        .state-tabs { display: flex; width: 100%; gap: 3px; margin-bottom: 8px; flex-shrink: 0; }
        .state-tab { flex: 1; text-align: center; padding: 10px 1px; font-size: 8px; font-weight: bold; cursor: pointer; border-radius: 4px; border: 1px solid #444; }
        .tab-hazure { background: rgba(255, 255, 255, 0.1); color: #aaa; }
        .tab-x_flag { background: rgba(48, 79, 254, 0.15); color: #5c6bc0; }
        .tab-seven_flag { background: rgba(244, 67, 54, 0.15); color: #ef5350; }
        .tab-bar_flag { background: rgba(76, 175, 80, 0.15); color: #66bb6a; }
        .active { border-color: #fff; border-width: 2px; }
        #view { flex: 1; display: flex; overflow: hidden; gap: 5px; }
        #reel-container { position: relative; width: 110px; height: 100%; background: #000; overflow: hidden; border: 2px solid #333; }
        #reel { position: absolute; width: 100%; transition: transform 0.1s ease-out; }
        .symbol { height: 60px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; border-bottom: 1px solid #222; }
        .guide-line { position: absolute; width: 100%; height: 60px; border: 2px solid #ff0; pointer-events: none; z-index: 10; top: 120px; }
        #info-panel { flex: 1; display: flex; flex-direction: column; background: #1e1e1e; border-radius: 4px; padding: 5px; overflow-y: auto; }
        .flag-row { display: flex; border-bottom: 1px solid #333; padding: 4px 0; align-items: center; font-size: 11px; }
        .flag-name { width: 70px; font-weight: bold; }
        .slip-val { flex: 1; text-align: center; font-size: 14px; color: #ffeb3b; }
        .stop-pos { width: 40px; text-align: right; color: #aaa; font-family: monospace; }
        .pos-label { font-size: 9px; color: #555; position: absolute; left: 2px; }
    </style>
</head>
<body>
    <div class="state-tabs">
        <div id="tab-hazure" class="state-tab tab-hazure active" onclick="switchState('hazure')">未成立</div>
        <div id="tab-x_flag" class="state-tab tab-x_flag" onclick="switchState('x_flag')">X成立</div>
        <div id="tab-seven_flag" class="state-tab tab-seven_flag" onclick="switchState('seven_flag')">7成立</div>
        <div id="tab-bar_flag" class="state-tab tab-bar_flag" onclick="switchState('bar_flag')">Reg成立</div>
    </div>
    <div id="view">
        <div id="reel-container"><div id="reel"></div><div class="guide-line"></div></div>
        <div id="info-panel"><div id="flag-list"></div></div>
    </div>

    <script>
        const SYMBOLS = ["BAR","チェリー","赤7","リプレイ","ベル","スイカ","X","ベル","リプレイ","スイカ","赤7","ベル","リプレイ","X","チェリー","ベル","リプレイ","スイカ","X","ベル","リプレイ"];
        const SYMBOL_H = 60;
        const FLAGS = [
            {n:"ハズレ",k:"hazure"},{n:"通常リプ",k:"normal_rep"},{n:"JACリプ",k:"jac_rep"},{n:"RTリプ",k:"rt_rep"},
            {n:"ベルA",k:"bellA"},{n:"ベルB",k:"bellB"},{n:"スイカA",k:"suikaA"},{n:"スイカB",k:"suikaB"},
            {n:"チェリA",k:"cherA"},{n:"チェリB",k:"cherB"},{n:"特役A",k:"tokA"},{n:"特役B",k:"tokB"},
            {n:"特役C",k:"tokC"},{n:"特役D",k:"tokD"},{n:"特役E",k:"tokE"}
        ];

        const GOD_DATA = {
            hazure: {
                hazure:     [0,0,2,2,0,1,2,3,4,0,1,1,3,3,0,1,2,0,1,2,3],
                normal_rep: [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                jac_rep:    [0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2,3],
                rt_rep:     [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                bellA:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                bellB:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                suikaA:     [0,3,0,3,2,1,4,0,4,0,3,4,0,4,0,0,2,2,4,0,1],
                suikaB:     [0,3,0,3,2,1,4,0,4,0,3,4,0,4,0,0,2,2,4,0,1],
                cherA:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,2,3,2,3],
                cherB:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,2,3,2,3]
            },
            x_flag: {
                hazure:     [2,3,4,3,2,1,4,3,1,0,3,0,0,2,2,0,1,0,1,0,3],
                normal_rep: [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                jac_rep:    [0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2,3],
                rt_rep:     [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                bellA:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                bellB:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                suikaA:     [2,3,4,3,2,1,4,3,1,0,3,2,0,4,2,0,1,0,1,0,3],
                suikaB:     [2,3,4,3,2,1,4,3,1,0,3,2,0,4,2,0,1,0,1,0,3],
                cherA:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,1,3,2,3],
                cherB:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,1,3,2,3],
                tokA:       [2,3,4,3,2,0,1,0,3,2,3,4,2,2,0,0,2,0,1,2,1],
                tokB:       [2,3,4,3,2,0,1,0,3,2,3,0,2,2,4,4,2,0,1,2,1],
                tokC:       [2,3,4,3,2,0,1,0,3,2,3,0,2,2,4,4,2,0,1,2,1],
                tokD:       [2,3,4,0,1,2,3,4,0,0,1,0,1,2,3,4,0,0,1,2,1],
                tokE:       [2,3,4,3,2,0,1,0,3,2,3,4,2,2,0,0,2,0,1,2,1]
            },
            seven_flag: {
                hazure:     [0,1,0,3,2,0,0,0,3,2,3,4,0,1,0,3,2,3,4,2,1],
                normal_rep: [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                jac_rep:    [0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2,3],
                rt_rep:     [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                bellA:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                bellB:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                suikaA:     [0,3,0,3,2,1,4,0,1,2,3,4,0,4,0,0,2,2,4,2,1],
                suikaB:     [0,3,0,3,2,1,4,0,1,2,3,4,0,4,0,0,2,2,4,2,1],
                cherA:      [2,3,0,1,2,3,1,0,1,2,3,4,3,0,1,0,1,2,3,2,3],
                cherB:      [2,3,0,1,2,3,1,0,1,2,3,4,3,0,1,0,1,2,3,2,3],
                tokA:       [2,3,0,3,2,0,1,0,3,2,3,4,2,2,0,0,2,3,2,0,1],
                tokB:       [1,2,2,3,0,0,1,0,1,2,3,4,3,2,3,4,3,1,1,3,0],
                tokC:       [2,3,0,3,2,0,1,0,1,2,3,4,2,2,4,4,2,2,2,2,1],
                tokD:       [2,3,0,3,2,0,1,0,3,2,1,0,2,2,4,4,1,3,3,2,1],
                tokE:       [2,3,0,3,2,0,1,0,3,2,3,4,2,2,0,0,2,3,3,2,1]
            },
            bar_flag: {
                hazure:     [2,3,0,1,0,1,2,0,1,2,3,4,0,1,0,3,2,3,4,0,1],
                normal_rep: [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                jac_rep:    [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,1,3,4,0,1,2],
                rt_rep:     [3,0,1,2,3,0,1,2,3,4,0,1,2,0,1,2,3,4,0,1,2],
                bellA:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                bellB:      [2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,0,1,2,3,0,1],
                suikaA:     [2,3,0,1,0,1,2,0,1,2,3,4,0,1,0,3,2,3,4,0,1],
                suikaB:     [2,3,0,1,0,1,2,0,1,2,0,4,0,1,0,3,2,3,4,0,1],
                cherA:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,2,3,2,3],
                cherB:      [2,3,0,1,2,3,2,3,4,0,1,2,3,0,1,0,1,2,3,2,3],
                tokA:       [0,1,2,3,0,1,1,0,1,2,3,4,0,1,0,1,2,3,4,2,1],
                tokB:       [0,1,2,3,0,1,1,0,1,2,3,4,3,3,4,4,2,3,4,2,1],
                tokC:       [0,1,2,3,0,1,1,0,1,2,3,4,3,3,4,4,2,3,4,2,1],
                tokD:       [0,1,2,3,0,1,1,0,1,0,1,2,3,3,4,4,2,3,4,2,1],
                tokE:       [0,1,2,3,0,1,1,0,1,2,3,4,0,1,0,1,2,3,4,2,1]
            }
        };

        let currentState = 'hazure';
        let currentY = -120 * SYMBOL_H; 
        const reel = document.getElementById('reel');
        let isDrag = false, startY = 0, initialY = 0;

        function createReel() {
            const extended = [...SYMBOLS, ...SYMBOLS, ...SYMBOLS, ...SYMBOLS, ...SYMBOLS];
            reel.innerHTML = extended.map((s, i) => {
                const pos = 21 - (i % 21);
                return `<div class="symbol"><span class="pos-label">${pos}</span>${s}</div>`;
            }).join('');
            applyScroll();
        }

        function applyScroll() { reel.style.transform = `translateY(${currentY}px)`; }

        const container = document.getElementById('reel-container');
        container.addEventListener('mousedown', e => { isDrag = true; startY = e.clientY; initialY = currentY; });
        container.addEventListener('touchstart', e => { isDrag = true; startY = e.touches[0].clientY; initialY = currentY; });
        window.addEventListener('mousemove', e => { if(!isDrag) return; currentY = initialY + (e.clientY - startY); applyScroll(); update(); });
        window.addEventListener('touchmove', e => { if(!isDrag) return; currentY = initialY + (e.touches[0].clientY - startY); applyScroll(); update(); });
        window.addEventListener('mouseup', () => { if(isDrag) { isDrag = false; currentY = Math.round(currentY/SYMBOL_H)*SYMBOL_H; applyScroll(); update(); } });
        window.addEventListener('touchend', () => { if(isDrag) { isDrag = false; currentY = Math.round(currentY/SYMBOL_H)*SYMBOL_H; applyScroll(); update(); } });

        function switchState(s) { 
            currentState = s; 
            document.querySelectorAll('.state-tab').forEach(t => t.classList.toggle('active', t.id === 'tab-' + s)); 
            update(); 
        }

        function update() {
            const list = document.getElementById('flag-list'); list.innerHTML = '';
            const cIdx = Math.round(-currentY / SYMBOL_H) + 2; 
            let r_b = 21 - (cIdx % 21);
            if (r_b < 1) r_b += 21; if (r_b > 21) r_b -= 21;

            const data = GOD_DATA[currentState];
            FLAGS.forEach(f => {
                const table = data[f.k]; if (!table) return;
                let slip = table[21 - r_b];
                let stopIdx = (r_b - slip); if(stopIdx < 1) stopIdx += 21;
                
                const row = document.createElement('div');
                row.className = 'flag-row';
                row.innerHTML = `<div class="flag-name">${f.n}</div><div class="slip-val">${slip}</div><div class="stop-pos">${stopIdx}番停</div>`;
                list.appendChild(row);
            });
        }

        createReel(); switchState('hazure');
    </script>
</body>
</html>